/*
Template Name: ASPSTUDIO - Responsive Bootstrap 5 Admin Template
Version: 3.0.0
Author: Sean Ngu
Website: http://www.seantheme.com/asp-studio/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
  01. Global Variable
  02. Handle Scrollbar
  03. Handle Sidebar Menu
  04. Handle Sidebar Minify
  05. Handle Sidebar Minify Float Menu
  06. Handle Dropdown Close Option
  07. Handle Card - Remove / Reload / Collapse / Expand
  08. Handle Tooltip & Popover Activation
  09. Handle Scroll to Top Button Activation
  10. Handle hexToRgba
  11. Handle Scroll to
  12. Handle Theme Panel Expand
  13. Handle Theme Page Control
  14. Handle Enable Tooltip & Popover
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */
var app = {
	font: {
	
	},
	color: {
	
	}
}


/* 02. Handle Scrollbar
------------------------------------------------ */
var handleSlimScroll = function() {
	"use strict";
	$.when($('[data-scrollbar=true]').each( function() {
		generateSlimScroll($(this));
	})).done(function() {
		$('[data-scrollbar="true"]').mouseover();
	});
};
var generateSlimScroll = function(element) {
	var isMobile = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
	
	if ($(element).attr('data-init') || (isMobile && $(element).attr('data-skip-mobile'))) {
		return;
	}
	var dataHeight = $(element).attr('data-height');
		dataHeight = (!dataHeight) ? $(element).height() : dataHeight;

	var scrollBarOption = {
		height: dataHeight, 
		alwaysVisible: false
	};
	if(isMobile) {
		$(element).css('height', dataHeight);
		$(element).css('overflow-x','scroll');
	} else {
		$(element).slimScroll(scrollBarOption);
		$(element).closest('.slimScrollDiv').find('.slimScrollBar').hide();
	}
	$(element).attr('data-init', true);
};


/* 03. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenu = function() {
	"use strict";
	$(document).on('click', '.app-sidebar .menu > .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		var target = $(this).next('.menu-submenu');
		var otherMenu = $('.app-sidebar .menu > .menu-item.has-sub > .menu-submenu').not(target);

		if ($('.app-sidebar-minified').length === 0) {
			$(otherMenu).slideUp(250);
			$(otherMenu).closest('.menu-item').removeClass('expand');
			
			$(target).slideToggle(250);
			var targetElm = $(target).closest('.menu-item');
			if ($(targetElm).hasClass('expand')) {
				$(targetElm).removeClass('expand');
			} else {
				$(targetElm).addClass('expand');
			}
		}
	});
	$(document).on('click', '.app-sidebar .menu > .menu-item.has-sub .menu-submenu .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		if ($('.app-sidebar-minified').length === 0) {
			var target = $(this).next('.menu-submenu');
			$(target).slideToggle(250);
		}
	});
};


/* 04. Handle Sidebar Minify
------------------------------------------------ */
var MOBILE_SIDEBAR_TOGGLE_CLASS = 'app-sidebar-mobile-toggled';
var MOBILE_SIDEBAR_CLOSED_CLASS = 'app-sidebar-mobile-closed';
var handleSidebarMinify = function() {
	$('[data-toggle="sidebar-minify"]').on('click', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		var targetClass = 'app-sidebar-minified';
		
		if ($(targetElm).hasClass(targetClass)) {
			$(targetElm).removeClass(targetClass);
			localStorage.removeItem('appSidebarMinified');
		} else {
			$(targetElm).addClass(targetClass);
			localStorage.setItem('appSidebarMinified', true);
		}
	});
	
	if (typeof(Storage) !== 'undefined') {
		if (localStorage.appSidebarMinified) {
			$('#app').addClass('app-sidebar-minified');
		}
	}
};
var handleSidebarMobileToggle = function() {
	$(document).on('click', '[data-toggle="sidebar-mobile"]', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		
		$(targetElm).removeClass(MOBILE_SIDEBAR_CLOSED_CLASS).addClass(MOBILE_SIDEBAR_TOGGLE_CLASS);
	});
};
var handleSidebarMobileDismiss = function() {
	$(document).on('click', '[data-dismiss="sidebar-mobile"]', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		
		$(targetElm).removeClass(MOBILE_SIDEBAR_TOGGLE_CLASS).addClass(MOBILE_SIDEBAR_CLOSED_CLASS);
		setTimeout(function() {
			$(targetElm).removeClass(MOBILE_SIDEBAR_CLOSED_CLASS);
		}, 250);
	});
};


/* 05. Handle Sidebar Minify Float Menu
------------------------------------------------ */
var floatSubMenuTimeout;
var targetFloatMenu;
var handleMouseoverFloatSubMenu = function(elm) {
	clearTimeout(floatSubMenuTimeout);
};
var handleMouseoutFloatSubMenu = function(elm) {
	floatSubMenuTimeout = setTimeout(function() {
		$('.app-float-submenu').remove();
	}, 250);
};
var handleSidebarMinifyFloatMenu = function() {
	$(document).on('click', '.app-float-submenu .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		var target = $(this).next('.menu-submenu');
		$(target).slideToggle(250, function() {
			var targetMenu = $('.app-float-submenu');
			var targetHeight = $(targetMenu).height() + 20;
			var targetOffset = $(targetMenu).offset();
			var targetTop = $(targetMenu).attr('data-offset-top');
			var windowHeight = $(window).height();
			if ((windowHeight - targetTop) > targetHeight) {
				$('.app-float-submenu').css({
					'top': targetTop,
					'bottom': 'auto',
					'overflow': 'initial'
				});
			} else {
				$('.app-float-submenu').css({
					'bottom': 0,
					'overflow': 'scroll'
				});
			}
		});
	});
	$(document).on('mouseover', '.app-sidebar-minified .app-sidebar .menu .menu-item.has-sub > .menu-link', function() {
		clearTimeout(floatSubMenuTimeout);
		
		var targetMenu = $(this).closest('.menu-item').find('.menu-submenu').first();
		if (targetFloatMenu == this) {
			return false;
		} else {
			targetFloatMenu = this;
		}
		var targetMenuHtml = $(targetMenu).html();
		
		if (targetMenuHtml) {
			var targetHeight = $(targetMenu).height() + 20;
			var targetOffset = $(this).offset();
			var targetTop = targetOffset.top - $(window).scrollTop();
			var targetLeft = ($('body').css('direction') != 'rtl') ? $('#sidebar').width() + $('#sidebar').offset().left : 'auto';
			var targetRight = ($('body').css('direction') != 'rtl') ? 'auto' : $('#sidebar').width();
			var windowHeight = $(window).height();
			var submenuHeight = 0;
			
			if ($('.app-float-submenu').length == 0) {
				targetMenuHtml = '<div class="app-float-submenu" data-offset-top="'+ targetTop +'" onmouseover="handleMouseoverFloatSubMenu(this)" onmouseout="handleMouseoutFloatSubMenu(this)">' + targetMenuHtml + '</div>';
				$('body').append(targetMenuHtml);
			} else {
				$('.app-float-submenu').html(targetMenuHtml);
			}
			submenuHeight = $('.app-float-submenu').height();
			if ((windowHeight - targetTop) > targetHeight && ((targetTop + submenuHeight) < windowHeight)) {
				$('.app-float-submenu').css({
					'top': targetTop,
					'left': targetLeft,
					'bottom': 'auto',
					'right': targetRight
				});
			} else {
				$('.app-float-submenu').css({
					'bottom': 0,
					'top': 'auto',
					'left': targetLeft,
					'right': targetRight
				});
			}
		} else {
			$('.app-float-submenu').remove();
			targetFloatMenu = '';
		}
	});
	$(document).on('mouseout', '.app-sidebar-minified .app-sidebar .menu > .menu-item.has-sub > .menu-link', function() {
		floatSubMenuTimeout = setTimeout(function() {
			$('.app-float-submenu').remove();
			targetFloatMenu = '';
		}, 250);
	});
}


/* 06. Handle Dropdown Close Option
------------------------------------------------ */
var handleDropdownClose = function() {
	$(document).on('click', '[data-dropdown-close="false"]', function(e) {
		e.stopPropagation();
	});
};


/* 07. Handle Card - Remove / Reload / Collapse / Expand
------------------------------------------------ */
var cardActionRunning = false;
var handleCardAction = function() {
	"use strict";

	if (cardActionRunning) {
		return false;
	}
	cardActionRunning = true;

	// expand
	$(document).on('mouseover', '[data-toggle=card-expand]', function(e) {
		if (!$(this).attr('data-init')) {
			$(this).tooltip({
				title: 'Expand / Compress',
				placement: 'bottom',
				trigger: 'hover',
				container: 'body'
			});
			$(this).tooltip('show');
			$(this).attr('data-init', true);
		}
	});
	$(document).on('click', '[data-toggle=card-expand]', function(e) {
		e.preventDefault();
		var target = $(this).closest('.card');
		var targetBody = $(target).find('.card-body');
		var targetClass = 'card-expand';
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(targetClass) && $(target).hasClass(targetClass)) {
			$('body, .card').removeClass(targetClass);
			$('.card').removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(targetClass);
			$(this).closest('.card').addClass(targetClass);
		}
		$(window).trigger('resize');
	});
};


/* 08. Handle Tooltip & Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
	"use strict";
	if ($('[data-toggle="tooltip"]').length !== 0) {
		$('[data-toggle=tooltip]').tooltip();
	}
	if ($('[data-toggle="popover"]').length !== 0) {
		$('[data-toggle=popover]').popover();
	}
};


/* 09. Handle Scroll to Top Button Activation
------------------------------------------------ */
var handleScrollToTopButton = function() {
	"use strict";
	$(document).on('scroll', function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= 200) {
			$('[data-click=scroll-top]').addClass('show');
		} else {
			$('[data-click=scroll-top]').removeClass('show');
		}
	});
	$('[data-click=scroll-top]').on('click', function(e) {
		e.preventDefault();
		$('html, body, .content').animate({
			scrollTop: $("body").offset().top
		}, 500);
	});
};


/* 10. Handle hexToRgba
------------------------------------------------ */
var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};


/* 11. Handle Scroll to
------------------------------------------------ */
var handleScrollTo = function() {
	$(document).on('click', '[data-toggle="scroll-to"]', function(e) {
		e.preventDefault();
		
		var targetElm = ($(this).attr('data-target')) ? $(this).attr('data-target') : $(this).attr('href');
		if (targetElm) {
			$('html, body').animate({
				scrollTop: $(targetElm).offset().top - $('#header').height() - 24
			}, 0);
		}
	});
};


/* 12. Handle Theme Panel Expand
------------------------------------------------ */
var handleThemePanelExpand = function() {
	$(document).on('click', '[data-click="theme-panel-expand"]', function() {
		var targetContainer = '.theme-panel';
		var targetClass = 'active';
		if ($(targetContainer).hasClass(targetClass)) {
			$(targetContainer).removeClass(targetClass);
			Cookies.set('theme-panel', 'collapse');
		} else {
			$(targetContainer).addClass(targetClass);
			Cookies.set('theme-panel', 'expand');
		}
	});
	
	if (Cookies.get('theme-panel') && Cookies.get('theme-panel') == 'expand') {
		$('[data-click="theme-panel-expand"]').trigger('click');
	}
};


/* 13. Handle Theme Page Control
------------------------------------------------ */
var handleThemePageControl = function() {
	if (typeof Cookies !== 'undefined') {
		$(document).on('click', '.theme-list [data-theme]', function(e) {	
			e.preventDefault();
			var targetThemeClass = $(this).attr('data-theme');
		
			for (var x = 0; x < document.body.classList.length; x++) {
				var targetClass = document.body.classList[x];
				if (targetClass.search('theme-') > -1) {
					$('body').removeClass(targetClass);
				}
			}
		
			$('body').addClass(targetThemeClass);
			$('.theme-list [data-theme]').not(this).closest('li').removeClass('active');
			$(this).closest('li').addClass('active');
		
			if (Cookies) {
				Cookies.set('theme', $(this).attr('data-theme'));
				$(document).trigger('theme-change');
			}
		});
		
		$(document).on('change', '.theme-panel [name="app-theme-dark-mode"]', function() {
			var targetCookie = '';
		
			if ($(this).is(':checked')) {
				$('html').addClass('dark-mode');
				targetCookie = 'dark-mode';
			} else {
				$('html').removeClass('dark-mode');
			}
		
			if (Cookies) {
				App.initVariable();
				Cookies.set('app-theme-dark-mode', targetCookie);
				$(document).trigger('theme-change');
			}
		});
		
		if (Cookies.get('theme') && $('.theme-list').length !== 0) {
			var targetElm = '.theme-list [data-theme="'+ Cookies.get('theme') +'"]';
			$(targetElm).trigger('click');
		}
		if (Cookies.get('app-theme-dark-mode') && $('.theme-panel [name="app-theme-dark-mode"]').length !== 0) {
			$('.theme-panel [name="app-theme-dark-mode"]').prop('checked', true).trigger('change');
		}
	}
};


/* 14. Handle Enable Tooltip & Popover
------------------------------------------------ */
var handleEnableTooltip = function() {
	var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
	var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
		return new bootstrap.Tooltip(tooltipTriggerEl)
	});
};


/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initSidebar();
			this.initHeader();
			this.initComponent();
			this.initVariable();
		},
		initSidebar: function() {
			handleSidebarMinifyFloatMenu();
			handleSidebarMenu();
			handleSidebarMinify();
			handleSidebarMobileToggle();
			handleSidebarMobileDismiss();
		},
		initHeader: function() {
		},
		initComponent: function() {
			handleSlimScroll();
			handleCardAction();
			handelTooltipPopoverActivation();
			handleScrollToTopButton();
			handleDropdownClose();
			handleScrollTo();
			handleThemePanelExpand();
			handleThemePageControl();
			handleEnableTooltip();
		},
		scrollTop: function() {
			$('html, body, .content').animate({
				scrollTop: $('body').offset().top
			}, 0);
		},
		getCssVariable: function(variable) {
			return window.getComputedStyle(document.body).getPropertyValue(variable).trim();
		},
		initVariable: function() {
			app.color.theme          = this.getCssVariable('--app-theme');
			app.font.family          = this.getCssVariable('--bs-body-font-family');
			app.font.size            = this.getCssVariable('--bs-body-font-size');
			app.font.weight          = this.getCssVariable('--bs-body-font-weight');
			app.color.componentColor = this.getCssVariable('--app-component-color');
			app.color.componentBg    = this.getCssVariable('--app-component-bg');
			app.color.dark           = this.getCssVariable('--bs-dark');
			app.color.light          = this.getCssVariable('--bs-light');
			app.color.blue           = this.getCssVariable('--bs-blue');
			app.color.indigo         = this.getCssVariable('--bs-indigo');
			app.color.purple         = this.getCssVariable('--bs-purple');
			app.color.pink           = this.getCssVariable('--bs-pink');
			app.color.red            = this.getCssVariable('--bs-red');
			app.color.orange         = this.getCssVariable('--bs-orange');
			app.color.yellow         = this.getCssVariable('--bs-yellow');
			app.color.green          = this.getCssVariable('--bs-green');
			app.color.success        = this.getCssVariable('--bs-success');
			app.color.teal           = this.getCssVariable('--bs-teal');
			app.color.cyan           = this.getCssVariable('--bs-cyan');
			app.color.white          = this.getCssVariable('--bs-white');
			app.color.gray           = this.getCssVariable('--bs-gray');
			app.color.lime           = this.getCssVariable('--bs-lime');
			app.color.gray100        = this.getCssVariable('--bs-gray-100');
			app.color.gray200        = this.getCssVariable('--bs-gray-200');
			app.color.gray300        = this.getCssVariable('--bs-gray-300');
			app.color.gray400        = this.getCssVariable('--bs-gray-400');
			app.color.gray500        = this.getCssVariable('--bs-gray-500');
			app.color.gray600        = this.getCssVariable('--bs-gray-600');
			app.color.gray700        = this.getCssVariable('--bs-gray-700');
			app.color.gray800        = this.getCssVariable('--bs-gray-800');
			app.color.gray900        = this.getCssVariable('--bs-gray-900');
			app.color.black          = this.getCssVariable('--bs-black');
			
			app.color.themeRgb          = this.getCssVariable('--app-theme-rgb');
			app.font.familyRgb          = this.getCssVariable('--bs-body-font-family-rgb');
			app.font.sizeRgb            = this.getCssVariable('--bs-body-font-size-rgb');
			app.font.weightRgb          = this.getCssVariable('--bs-body-font-weight-rgb');
			app.color.componentColorRgb = this.getCssVariable('--app-component-color-rgb');
			app.color.componentBgRgb    = this.getCssVariable('--app-component-bg-rgb');
			app.color.darkRgb           = this.getCssVariable('--bs-dark-rgb');
			app.color.lightRgb          = this.getCssVariable('--bs-light-rgb');
			app.color.blueRgb           = this.getCssVariable('--bs-blue-rgb');
			app.color.indigoRgb         = this.getCssVariable('--bs-indigo-rgb');
			app.color.purpleRgb         = this.getCssVariable('--bs-purple-rgb');
			app.color.pinkRgb           = this.getCssVariable('--bs-pink-rgb');
			app.color.redRgb            = this.getCssVariable('--bs-red-rgb');
			app.color.orangeRgb         = this.getCssVariable('--bs-orange-rgb');
			app.color.yellowRgb         = this.getCssVariable('--bs-yellow-rgb');
			app.color.greenRgb          = this.getCssVariable('--bs-green-rgb');
			app.color.successRgb        = this.getCssVariable('--bs-success-rgb');
			app.color.tealRgb           = this.getCssVariable('--bs-teal-rgb');
			app.color.cyanRgb           = this.getCssVariable('--bs-cyan-rgb');
			app.color.whiteRgb          = this.getCssVariable('--bs-white-rgb');
			app.color.grayRgb           = this.getCssVariable('--bs-gray-rgb');
			app.color.limeRgb           = this.getCssVariable('--bs-lime-rgb');
			app.color.gray100Rgb        = this.getCssVariable('--bs-gray-100-rgb');
			app.color.gray200Rgb        = this.getCssVariable('--bs-gray-200-rgb');
			app.color.gray300Rgb        = this.getCssVariable('--bs-gray-300-rgb');
			app.color.gray400Rgb        = this.getCssVariable('--bs-gray-400-rgb');
			app.color.gray500Rgb        = this.getCssVariable('--bs-gray-500-rgb');
			app.color.gray600Rgb        = this.getCssVariable('--bs-gray-600-rgb');
			app.color.gray700Rgb        = this.getCssVariable('--bs-gray-700-rgb');
			app.color.gray800Rgb        = this.getCssVariable('--bs-gray-800-rgb');
			app.color.gray900Rgb        = this.getCssVariable('--bs-gray-900-rgb');
			app.color.blackRgb          = this.getCssVariable('--bs-black-rgb');
		}
	};
}();

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG5UZW1wbGF0ZSBOYW1lOiBBU1BTVFVESU8gLSBSZXNwb25zaXZlIEJvb3RzdHJhcCA1IEFkbWluIFRlbXBsYXRlXG5WZXJzaW9uOiAzLjAuMFxuQXV0aG9yOiBTZWFuIE5ndVxuV2Vic2l0ZTogaHR0cDovL3d3dy5zZWFudGhlbWUuY29tL2FzcC1zdHVkaW8vXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRBUFBTIENPTlRFTlQgVEFCTEVcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdDwhLS0gPT09PT09PT0gR0xPQkFMIFNDUklQVCBTRVRUSU5HID09PT09PT09IC0tPlxuICAwMS4gR2xvYmFsIFZhcmlhYmxlXG4gIDAyLiBIYW5kbGUgU2Nyb2xsYmFyXG4gIDAzLiBIYW5kbGUgU2lkZWJhciBNZW51XG4gIDA0LiBIYW5kbGUgU2lkZWJhciBNaW5pZnlcbiAgMDUuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeSBGbG9hdCBNZW51XG4gIDA2LiBIYW5kbGUgRHJvcGRvd24gQ2xvc2UgT3B0aW9uXG4gIDA3LiBIYW5kbGUgQ2FyZCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXG4gIDA4LiBIYW5kbGUgVG9vbHRpcCAmIFBvcG92ZXIgQWN0aXZhdGlvblxuICAwOS4gSGFuZGxlIFNjcm9sbCB0byBUb3AgQnV0dG9uIEFjdGl2YXRpb25cbiAgMTAuIEhhbmRsZSBoZXhUb1JnYmFcbiAgMTEuIEhhbmRsZSBTY3JvbGwgdG9cbiAgMTIuIEhhbmRsZSBUaGVtZSBQYW5lbCBFeHBhbmRcbiAgMTMuIEhhbmRsZSBUaGVtZSBQYWdlIENvbnRyb2xcbiAgMTQuIEhhbmRsZSBFbmFibGUgVG9vbHRpcCAmIFBvcG92ZXJcblx0XG5cdDwhLS0gPT09PT09PT0gQVBQTElDQVRJT04gU0VUVElORyA9PT09PT09PSAtLT5cblx0QXBwbGljYXRpb24gQ29udHJvbGxlclxuKi9cblxuXG5cbi8qIDAxLiBHbG9iYWwgVmFyaWFibGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGFwcCA9IHtcblx0Zm9udDoge1xuXHRcblx0fSxcblx0Y29sb3I6IHtcblx0XG5cdH1cbn1cblxuXG4vKiAwMi4gSGFuZGxlIFNjcm9sbGJhclxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGFuZGxlU2xpbVNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0JC53aGVuKCQoJ1tkYXRhLXNjcm9sbGJhcj10cnVlXScpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdGdlbmVyYXRlU2xpbVNjcm9sbCgkKHRoaXMpKTtcblx0fSkpLmRvbmUoZnVuY3Rpb24oKSB7XG5cdFx0JCgnW2RhdGEtc2Nyb2xsYmFyPVwidHJ1ZVwiXScpLm1vdXNlb3ZlcigpO1xuXHR9KTtcbn07XG52YXIgZ2VuZXJhdGVTbGltU2Nyb2xsID0gZnVuY3Rpb24oZWxlbWVudCkge1xuXHR2YXIgaXNNb2JpbGUgPSAoL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTtcblx0XG5cdGlmICgkKGVsZW1lbnQpLmF0dHIoJ2RhdGEtaW5pdCcpIHx8IChpc01vYmlsZSAmJiAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEtc2tpcC1tb2JpbGUnKSkpIHtcblx0XHRyZXR1cm47XG5cdH1cblx0dmFyIGRhdGFIZWlnaHQgPSAkKGVsZW1lbnQpLmF0dHIoJ2RhdGEtaGVpZ2h0Jyk7XG5cdFx0ZGF0YUhlaWdodCA9ICghZGF0YUhlaWdodCkgPyAkKGVsZW1lbnQpLmhlaWdodCgpIDogZGF0YUhlaWdodDtcblxuXHR2YXIgc2Nyb2xsQmFyT3B0aW9uID0ge1xuXHRcdGhlaWdodDogZGF0YUhlaWdodCwgXG5cdFx0YWx3YXlzVmlzaWJsZTogZmFsc2Vcblx0fTtcblx0aWYoaXNNb2JpbGUpIHtcblx0XHQkKGVsZW1lbnQpLmNzcygnaGVpZ2h0JywgZGF0YUhlaWdodCk7XG5cdFx0JChlbGVtZW50KS5jc3MoJ292ZXJmbG93LXgnLCdzY3JvbGwnKTtcblx0fSBlbHNlIHtcblx0XHQkKGVsZW1lbnQpLnNsaW1TY3JvbGwoc2Nyb2xsQmFyT3B0aW9uKTtcblx0XHQkKGVsZW1lbnQpLmNsb3Nlc3QoJy5zbGltU2Nyb2xsRGl2JykuZmluZCgnLnNsaW1TY3JvbGxCYXInKS5oaWRlKCk7XG5cdH1cblx0JChlbGVtZW50KS5hdHRyKCdkYXRhLWluaXQnLCB0cnVlKTtcbn07XG5cblxuLyogMDMuIEhhbmRsZSBTaWRlYmFyIE1lbnVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNpZGViYXJNZW51ID0gZnVuY3Rpb24oKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmFwcC1zaWRlYmFyIC5tZW51ID4gLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtbGluaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0dmFyIHRhcmdldCA9ICQodGhpcykubmV4dCgnLm1lbnUtc3VibWVudScpO1xuXHRcdHZhciBvdGhlck1lbnUgPSAkKCcuYXBwLXNpZGViYXIgLm1lbnUgPiAubWVudS1pdGVtLmhhcy1zdWIgPiAubWVudS1zdWJtZW51Jykubm90KHRhcmdldCk7XG5cblx0XHRpZiAoJCgnLmFwcC1zaWRlYmFyLW1pbmlmaWVkJykubGVuZ3RoID09PSAwKSB7XG5cdFx0XHQkKG90aGVyTWVudSkuc2xpZGVVcCgyNTApO1xuXHRcdFx0JChvdGhlck1lbnUpLmNsb3Nlc3QoJy5tZW51LWl0ZW0nKS5yZW1vdmVDbGFzcygnZXhwYW5kJyk7XG5cdFx0XHRcblx0XHRcdCQodGFyZ2V0KS5zbGlkZVRvZ2dsZSgyNTApO1xuXHRcdFx0dmFyIHRhcmdldEVsbSA9ICQodGFyZ2V0KS5jbG9zZXN0KCcubWVudS1pdGVtJyk7XG5cdFx0XHRpZiAoJCh0YXJnZXRFbG0pLmhhc0NsYXNzKCdleHBhbmQnKSkge1xuXHRcdFx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3MoJ2V4cGFuZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCh0YXJnZXRFbG0pLmFkZENsYXNzKCdleHBhbmQnKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmFwcC1zaWRlYmFyIC5tZW51ID4gLm1lbnUtaXRlbS5oYXMtc3ViIC5tZW51LXN1Ym1lbnUgLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtbGluaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0aWYgKCQoJy5hcHAtc2lkZWJhci1taW5pZmllZCcpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dmFyIHRhcmdldCA9ICQodGhpcykubmV4dCgnLm1lbnUtc3VibWVudScpO1xuXHRcdFx0JCh0YXJnZXQpLnNsaWRlVG9nZ2xlKDI1MCk7XG5cdFx0fVxuXHR9KTtcbn07XG5cblxuLyogMDQuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgTU9CSUxFX1NJREVCQVJfVE9HR0xFX0NMQVNTID0gJ2FwcC1zaWRlYmFyLW1vYmlsZS10b2dnbGVkJztcbnZhciBNT0JJTEVfU0lERUJBUl9DTE9TRURfQ0xBU1MgPSAnYXBwLXNpZGViYXItbW9iaWxlLWNsb3NlZCc7XG52YXIgaGFuZGxlU2lkZWJhck1pbmlmeSA9IGZ1bmN0aW9uKCkge1xuXHQkKCdbZGF0YS10b2dnbGU9XCJzaWRlYmFyLW1pbmlmeVwiXScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0dmFyIHRhcmdldEVsbSA9ICcjYXBwJztcblx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSAnYXBwLXNpZGViYXItbWluaWZpZWQnO1xuXHRcdFxuXHRcdGlmICgkKHRhcmdldEVsbSkuaGFzQ2xhc3ModGFyZ2V0Q2xhc3MpKSB7XG5cdFx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2FwcFNpZGViYXJNaW5pZmllZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRhcmdldEVsbSkuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FwcFNpZGViYXJNaW5pZmllZCcsIHRydWUpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRpZiAodHlwZW9mKFN0b3JhZ2UpICE9PSAndW5kZWZpbmVkJykge1xuXHRcdGlmIChsb2NhbFN0b3JhZ2UuYXBwU2lkZWJhck1pbmlmaWVkKSB7XG5cdFx0XHQkKCcjYXBwJykuYWRkQ2xhc3MoJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJyk7XG5cdFx0fVxuXHR9XG59O1xudmFyIGhhbmRsZVNpZGViYXJNb2JpbGVUb2dnbGUgPSBmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXRvZ2dsZT1cInNpZGViYXItbW9iaWxlXCJdJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0RWxtID0gJyNhcHAnO1xuXHRcdFxuXHRcdCQodGFyZ2V0RWxtKS5yZW1vdmVDbGFzcyhNT0JJTEVfU0lERUJBUl9DTE9TRURfQ0xBU1MpLmFkZENsYXNzKE1PQklMRV9TSURFQkFSX1RPR0dMRV9DTEFTUyk7XG5cdH0pO1xufTtcbnZhciBoYW5kbGVTaWRlYmFyTW9iaWxlRGlzbWlzcyA9IGZ1bmN0aW9uKCkge1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZGlzbWlzcz1cInNpZGViYXItbW9iaWxlXCJdJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0RWxtID0gJyNhcHAnO1xuXHRcdFxuXHRcdCQodGFyZ2V0RWxtKS5yZW1vdmVDbGFzcyhNT0JJTEVfU0lERUJBUl9UT0dHTEVfQ0xBU1MpLmFkZENsYXNzKE1PQklMRV9TSURFQkFSX0NMT1NFRF9DTEFTUyk7XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdCQodGFyZ2V0RWxtKS5yZW1vdmVDbGFzcyhNT0JJTEVfU0lERUJBUl9DTE9TRURfQ0xBU1MpO1xuXHRcdH0sIDI1MCk7XG5cdH0pO1xufTtcblxuXG4vKiAwNS4gSGFuZGxlIFNpZGViYXIgTWluaWZ5IEZsb2F0IE1lbnVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGZsb2F0U3ViTWVudVRpbWVvdXQ7XG52YXIgdGFyZ2V0RmxvYXRNZW51O1xudmFyIGhhbmRsZU1vdXNlb3ZlckZsb2F0U3ViTWVudSA9IGZ1bmN0aW9uKGVsbSkge1xuXHRjbGVhclRpbWVvdXQoZmxvYXRTdWJNZW51VGltZW91dCk7XG59O1xudmFyIGhhbmRsZU1vdXNlb3V0RmxvYXRTdWJNZW51ID0gZnVuY3Rpb24oZWxtKSB7XG5cdGZsb2F0U3ViTWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5hcHAtZmxvYXQtc3VibWVudScpLnJlbW92ZSgpO1xuXHR9LCAyNTApO1xufTtcbnZhciBoYW5kbGVTaWRlYmFyTWluaWZ5RmxvYXRNZW51ID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYXBwLWZsb2F0LXN1Ym1lbnUgLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtbGluaycsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0dmFyIHRhcmdldCA9ICQodGhpcykubmV4dCgnLm1lbnUtc3VibWVudScpO1xuXHRcdCQodGFyZ2V0KS5zbGlkZVRvZ2dsZSgyNTAsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHRhcmdldE1lbnUgPSAkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKTtcblx0XHRcdHZhciB0YXJnZXRIZWlnaHQgPSAkKHRhcmdldE1lbnUpLmhlaWdodCgpICsgMjA7XG5cdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0ID0gJCh0YXJnZXRNZW51KS5vZmZzZXQoKTtcblx0XHRcdHZhciB0YXJnZXRUb3AgPSAkKHRhcmdldE1lbnUpLmF0dHIoJ2RhdGEtb2Zmc2V0LXRvcCcpO1xuXHRcdFx0dmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblx0XHRcdGlmICgod2luZG93SGVpZ2h0IC0gdGFyZ2V0VG9wKSA+IHRhcmdldEhlaWdodCkge1xuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5jc3Moe1xuXHRcdFx0XHRcdCd0b3AnOiB0YXJnZXRUb3AsXG5cdFx0XHRcdFx0J2JvdHRvbSc6ICdhdXRvJyxcblx0XHRcdFx0XHQnb3ZlcmZsb3cnOiAnaW5pdGlhbCdcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5jc3Moe1xuXHRcdFx0XHRcdCdib3R0b20nOiAwLFxuXHRcdFx0XHRcdCdvdmVyZmxvdyc6ICdzY3JvbGwnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICcuYXBwLXNpZGViYXItbWluaWZpZWQgLmFwcC1zaWRlYmFyIC5tZW51IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbigpIHtcblx0XHRjbGVhclRpbWVvdXQoZmxvYXRTdWJNZW51VGltZW91dCk7XG5cdFx0XG5cdFx0dmFyIHRhcmdldE1lbnUgPSAkKHRoaXMpLmNsb3Nlc3QoJy5tZW51LWl0ZW0nKS5maW5kKCcubWVudS1zdWJtZW51JykuZmlyc3QoKTtcblx0XHRpZiAodGFyZ2V0RmxvYXRNZW51ID09IHRoaXMpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0RmxvYXRNZW51ID0gdGhpcztcblx0XHR9XG5cdFx0dmFyIHRhcmdldE1lbnVIdG1sID0gJCh0YXJnZXRNZW51KS5odG1sKCk7XG5cdFx0XG5cdFx0aWYgKHRhcmdldE1lbnVIdG1sKSB7XG5cdFx0XHR2YXIgdGFyZ2V0SGVpZ2h0ID0gJCh0YXJnZXRNZW51KS5oZWlnaHQoKSArIDIwO1xuXHRcdFx0dmFyIHRhcmdldE9mZnNldCA9ICQodGhpcykub2Zmc2V0KCk7XG5cdFx0XHR2YXIgdGFyZ2V0VG9wID0gdGFyZ2V0T2Zmc2V0LnRvcCAtICQod2luZG93KS5zY3JvbGxUb3AoKTtcblx0XHRcdHZhciB0YXJnZXRMZWZ0ID0gKCQoJ2JvZHknKS5jc3MoJ2RpcmVjdGlvbicpICE9ICdydGwnKSA/ICQoJyNzaWRlYmFyJykud2lkdGgoKSArICQoJyNzaWRlYmFyJykub2Zmc2V0KCkubGVmdCA6ICdhdXRvJztcblx0XHRcdHZhciB0YXJnZXRSaWdodCA9ICgkKCdib2R5JykuY3NzKCdkaXJlY3Rpb24nKSAhPSAncnRsJykgPyAnYXV0bycgOiAkKCcjc2lkZWJhcicpLndpZHRoKCk7XG5cdFx0XHR2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuXHRcdFx0dmFyIHN1Ym1lbnVIZWlnaHQgPSAwO1xuXHRcdFx0XG5cdFx0XHRpZiAoJCgnLmFwcC1mbG9hdC1zdWJtZW51JykubGVuZ3RoID09IDApIHtcblx0XHRcdFx0dGFyZ2V0TWVudUh0bWwgPSAnPGRpdiBjbGFzcz1cImFwcC1mbG9hdC1zdWJtZW51XCIgZGF0YS1vZmZzZXQtdG9wPVwiJysgdGFyZ2V0VG9wICsnXCIgb25tb3VzZW92ZXI9XCJoYW5kbGVNb3VzZW92ZXJGbG9hdFN1Yk1lbnUodGhpcylcIiBvbm1vdXNlb3V0PVwiaGFuZGxlTW91c2VvdXRGbG9hdFN1Yk1lbnUodGhpcylcIj4nICsgdGFyZ2V0TWVudUh0bWwgKyAnPC9kaXY+Jztcblx0XHRcdFx0JCgnYm9keScpLmFwcGVuZCh0YXJnZXRNZW51SHRtbCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5odG1sKHRhcmdldE1lbnVIdG1sKTtcblx0XHRcdH1cblx0XHRcdHN1Ym1lbnVIZWlnaHQgPSAkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5oZWlnaHQoKTtcblx0XHRcdGlmICgod2luZG93SGVpZ2h0IC0gdGFyZ2V0VG9wKSA+IHRhcmdldEhlaWdodCAmJiAoKHRhcmdldFRvcCArIHN1Ym1lbnVIZWlnaHQpIDwgd2luZG93SGVpZ2h0KSkge1xuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5jc3Moe1xuXHRcdFx0XHRcdCd0b3AnOiB0YXJnZXRUb3AsXG5cdFx0XHRcdFx0J2xlZnQnOiB0YXJnZXRMZWZ0LFxuXHRcdFx0XHRcdCdib3R0b20nOiAnYXV0bycsXG5cdFx0XHRcdFx0J3JpZ2h0JzogdGFyZ2V0UmlnaHRcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5jc3Moe1xuXHRcdFx0XHRcdCdib3R0b20nOiAwLFxuXHRcdFx0XHRcdCd0b3AnOiAnYXV0bycsXG5cdFx0XHRcdFx0J2xlZnQnOiB0YXJnZXRMZWZ0LFxuXHRcdFx0XHRcdCdyaWdodCc6IHRhcmdldFJpZ2h0XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5yZW1vdmUoKTtcblx0XHRcdHRhcmdldEZsb2F0TWVudSA9ICcnO1xuXHRcdH1cblx0fSk7XG5cdCQoZG9jdW1lbnQpLm9uKCdtb3VzZW91dCcsICcuYXBwLXNpZGViYXItbWluaWZpZWQgLmFwcC1zaWRlYmFyIC5tZW51ID4gLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtbGluaycsIGZ1bmN0aW9uKCkge1xuXHRcdGZsb2F0U3ViTWVudVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykucmVtb3ZlKCk7XG5cdFx0XHR0YXJnZXRGbG9hdE1lbnUgPSAnJztcblx0XHR9LCAyNTApO1xuXHR9KTtcbn1cblxuXG4vKiAwNi4gSGFuZGxlIERyb3Bkb3duIENsb3NlIE9wdGlvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGFuZGxlRHJvcGRvd25DbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZHJvcGRvd24tY2xvc2U9XCJmYWxzZVwiXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9KTtcbn07XG5cblxuLyogMDcuIEhhbmRsZSBDYXJkIC0gUmVtb3ZlIC8gUmVsb2FkIC8gQ29sbGFwc2UgLyBFeHBhbmRcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGNhcmRBY3Rpb25SdW5uaW5nID0gZmFsc2U7XG52YXIgaGFuZGxlQ2FyZEFjdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRpZiAoY2FyZEFjdGlvblJ1bm5pbmcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0Y2FyZEFjdGlvblJ1bm5pbmcgPSB0cnVlO1xuXG5cdC8vIGV4cGFuZFxuXHQkKGRvY3VtZW50KS5vbignbW91c2VvdmVyJywgJ1tkYXRhLXRvZ2dsZT1jYXJkLWV4cGFuZF0nLCBmdW5jdGlvbihlKSB7XG5cdFx0aWYgKCEkKHRoaXMpLmF0dHIoJ2RhdGEtaW5pdCcpKSB7XG5cdFx0XHQkKHRoaXMpLnRvb2x0aXAoe1xuXHRcdFx0XHR0aXRsZTogJ0V4cGFuZCAvIENvbXByZXNzJyxcblx0XHRcdFx0cGxhY2VtZW50OiAnYm90dG9tJyxcblx0XHRcdFx0dHJpZ2dlcjogJ2hvdmVyJyxcblx0XHRcdFx0Y29udGFpbmVyOiAnYm9keSdcblx0XHRcdH0pO1xuXHRcdFx0JCh0aGlzKS50b29sdGlwKCdzaG93Jyk7XG5cdFx0XHQkKHRoaXMpLmF0dHIoJ2RhdGEtaW5pdCcsIHRydWUpO1xuXHRcdH1cblx0fSk7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGU9Y2FyZC1leHBhbmRdJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR2YXIgdGFyZ2V0ID0gJCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpO1xuXHRcdHZhciB0YXJnZXRCb2R5ID0gJCh0YXJnZXQpLmZpbmQoJy5jYXJkLWJvZHknKTtcblx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSAnY2FyZC1leHBhbmQnO1xuXHRcdHZhciB0YXJnZXRUb3AgPSA0MDtcblx0XHRpZiAoJCh0YXJnZXRCb2R5KS5sZW5ndGggIT09IDApIHtcblx0XHRcdHZhciB0YXJnZXRPZmZzZXRUb3AgPSAkKHRhcmdldCkub2Zmc2V0KCkudG9wO1xuXHRcdFx0dmFyIHRhcmdldEJvZHlPZmZzZXRUb3AgPSAkKHRhcmdldEJvZHkpLm9mZnNldCgpLnRvcDtcblx0XHRcdHRhcmdldFRvcCA9IHRhcmdldEJvZHlPZmZzZXRUb3AgLSB0YXJnZXRPZmZzZXRUb3A7XG5cdFx0fVxuXG5cdFx0aWYgKCQoJ2JvZHknKS5oYXNDbGFzcyh0YXJnZXRDbGFzcykgJiYgJCh0YXJnZXQpLmhhc0NsYXNzKHRhcmdldENsYXNzKSkge1xuXHRcdFx0JCgnYm9keSwgLmNhcmQnKS5yZW1vdmVDbGFzcyh0YXJnZXRDbGFzcyk7XG5cdFx0XHQkKCcuY2FyZCcpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0XHQkKHRhcmdldEJvZHkpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcyh0YXJnZXRDbGFzcyk7XG5cdFx0XHQkKHRoaXMpLmNsb3Nlc3QoJy5jYXJkJykuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdH1cblx0XHQkKHdpbmRvdykudHJpZ2dlcigncmVzaXplJyk7XG5cdH0pO1xufTtcblxuXG4vKiAwOC4gSGFuZGxlIFRvb2x0aXAgJiBQb3BvdmVyIEFjdGl2YXRpb25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRlbFRvb2x0aXBQb3BvdmVyQWN0aXZhdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0aWYgKCQoJ1tkYXRhLXRvZ2dsZT1cInRvb2x0aXBcIl0nKS5sZW5ndGggIT09IDApIHtcblx0XHQkKCdbZGF0YS10b2dnbGU9dG9vbHRpcF0nKS50b29sdGlwKCk7XG5cdH1cblx0aWYgKCQoJ1tkYXRhLXRvZ2dsZT1cInBvcG92ZXJcIl0nKS5sZW5ndGggIT09IDApIHtcblx0XHQkKCdbZGF0YS10b2dnbGU9cG9wb3Zlcl0nKS5wb3BvdmVyKCk7XG5cdH1cbn07XG5cblxuLyogMDkuIEhhbmRsZSBTY3JvbGwgdG8gVG9wIEJ1dHRvbiBBY3RpdmF0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0JChkb2N1bWVudCkub24oJ3Njcm9sbCcsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0b3RhbFNjcm9sbCA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xuXG5cdFx0aWYgKHRvdGFsU2Nyb2xsID49IDIwMCkge1xuXHRcdFx0JCgnW2RhdGEtY2xpY2s9c2Nyb2xsLXRvcF0nKS5hZGRDbGFzcygnc2hvdycpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCdbZGF0YS1jbGljaz1zY3JvbGwtdG9wXScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG5cdFx0fVxuXHR9KTtcblx0JCgnW2RhdGEtY2xpY2s9c2Nyb2xsLXRvcF0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCQoJ2h0bWwsIGJvZHksIC5jb250ZW50JykuYW5pbWF0ZSh7XG5cdFx0XHRzY3JvbGxUb3A6ICQoXCJib2R5XCIpLm9mZnNldCgpLnRvcFxuXHRcdH0sIDUwMCk7XG5cdH0pO1xufTtcblxuXG4vKiAxMC4gSGFuZGxlIGhleFRvUmdiYVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGV4VG9SZ2JhID0gZnVuY3Rpb24oaGV4LCB0cmFuc3BhcmVudCA9IDEpIHtcblx0dmFyIGM7XG5cdGlmKC9eIyhbQS1GYS1mMC05XXszfSl7MSwyfSQvLnRlc3QoaGV4KSl7XG5cdFx0XHRjPSBoZXguc3Vic3RyaW5nKDEpLnNwbGl0KCcnKTtcblx0XHRcdGlmKGMubGVuZ3RoPT0gMyl7XG5cdFx0XHRcdFx0Yz0gW2NbMF0sIGNbMF0sIGNbMV0sIGNbMV0sIGNbMl0sIGNbMl1dO1xuXHRcdFx0fVxuXHRcdFx0Yz0gJzB4JytjLmpvaW4oJycpO1xuXHRcdFx0cmV0dXJuICdyZ2JhKCcrWyhjPj4xNikmMjU1LCAoYz4+OCkmMjU1LCBjJjI1NV0uam9pbignLCcpKycsJysgdHJhbnNwYXJlbnQgKycpJztcblx0fVxuICB0aHJvdyBuZXcgRXJyb3IoJ0JhZCBIZXgnKTtcbn07XG5cblxuLyogMTEuIEhhbmRsZSBTY3JvbGwgdG9cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNjcm9sbFRvID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGU9XCJzY3JvbGwtdG9cIl0nLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXRFbG0gPSAoJCh0aGlzKS5hdHRyKCdkYXRhLXRhcmdldCcpKSA/ICQodGhpcykuYXR0cignZGF0YS10YXJnZXQnKSA6ICQodGhpcykuYXR0cignaHJlZicpO1xuXHRcdGlmICh0YXJnZXRFbG0pIHtcblx0XHRcdCQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcblx0XHRcdFx0c2Nyb2xsVG9wOiAkKHRhcmdldEVsbSkub2Zmc2V0KCkudG9wIC0gJCgnI2hlYWRlcicpLmhlaWdodCgpIC0gMjRcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0fSk7XG59O1xuXG5cbi8qIDEyLiBIYW5kbGUgVGhlbWUgUGFuZWwgRXhwYW5kXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVUaGVtZVBhbmVsRXhwYW5kID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS1jbGljaz1cInRoZW1lLXBhbmVsLWV4cGFuZFwiXScsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciB0YXJnZXRDb250YWluZXIgPSAnLnRoZW1lLXBhbmVsJztcblx0XHR2YXIgdGFyZ2V0Q2xhc3MgPSAnYWN0aXZlJztcblx0XHRpZiAoJCh0YXJnZXRDb250YWluZXIpLmhhc0NsYXNzKHRhcmdldENsYXNzKSkge1xuXHRcdFx0JCh0YXJnZXRDb250YWluZXIpLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdENvb2tpZXMuc2V0KCd0aGVtZS1wYW5lbCcsICdjb2xsYXBzZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKHRhcmdldENvbnRhaW5lcikuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0Q29va2llcy5zZXQoJ3RoZW1lLXBhbmVsJywgJ2V4cGFuZCcpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRpZiAoQ29va2llcy5nZXQoJ3RoZW1lLXBhbmVsJykgJiYgQ29va2llcy5nZXQoJ3RoZW1lLXBhbmVsJykgPT0gJ2V4cGFuZCcpIHtcblx0XHQkKCdbZGF0YS1jbGljaz1cInRoZW1lLXBhbmVsLWV4cGFuZFwiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdH1cbn07XG5cblxuLyogMTMuIEhhbmRsZSBUaGVtZSBQYWdlIENvbnRyb2xcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVRoZW1lUGFnZUNvbnRyb2wgPSBmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBDb29raWVzICE9PSAndW5kZWZpbmVkJykge1xuXHRcdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcudGhlbWUtbGlzdCBbZGF0YS10aGVtZV0nLCBmdW5jdGlvbihlKSB7XHRcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHZhciB0YXJnZXRUaGVtZUNsYXNzID0gJCh0aGlzKS5hdHRyKCdkYXRhLXRoZW1lJyk7XG5cdFx0XG5cdFx0XHRmb3IgKHZhciB4ID0gMDsgeCA8IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0Lmxlbmd0aDsgeCsrKSB7XG5cdFx0XHRcdHZhciB0YXJnZXRDbGFzcyA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0W3hdO1xuXHRcdFx0XHRpZiAodGFyZ2V0Q2xhc3Muc2VhcmNoKCd0aGVtZS0nKSA+IC0xKSB7XG5cdFx0XHRcdFx0JCgnYm9keScpLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFxuXHRcdFx0JCgnYm9keScpLmFkZENsYXNzKHRhcmdldFRoZW1lQ2xhc3MpO1xuXHRcdFx0JCgnLnRoZW1lLWxpc3QgW2RhdGEtdGhlbWVdJykubm90KHRoaXMpLmNsb3Nlc3QoJ2xpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCdsaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHRcblx0XHRcdGlmIChDb29raWVzKSB7XG5cdFx0XHRcdENvb2tpZXMuc2V0KCd0aGVtZScsICQodGhpcykuYXR0cignZGF0YS10aGVtZScpKTtcblx0XHRcdFx0JChkb2N1bWVudCkudHJpZ2dlcigndGhlbWUtY2hhbmdlJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0JChkb2N1bWVudCkub24oJ2NoYW5nZScsICcudGhlbWUtcGFuZWwgW25hbWU9XCJhcHAtdGhlbWUtZGFyay1tb2RlXCJdJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdGFyZ2V0Q29va2llID0gJyc7XG5cdFx0XG5cdFx0XHRpZiAoJCh0aGlzKS5pcygnOmNoZWNrZWQnKSkge1xuXHRcdFx0XHQkKCdodG1sJykuYWRkQ2xhc3MoJ2RhcmstbW9kZScpO1xuXHRcdFx0XHR0YXJnZXRDb29raWUgPSAnZGFyay1tb2RlJztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnZGFyay1tb2RlJyk7XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHRpZiAoQ29va2llcykge1xuXHRcdFx0XHRBcHAuaW5pdFZhcmlhYmxlKCk7XG5cdFx0XHRcdENvb2tpZXMuc2V0KCdhcHAtdGhlbWUtZGFyay1tb2RlJywgdGFyZ2V0Q29va2llKTtcblx0XHRcdFx0JChkb2N1bWVudCkudHJpZ2dlcigndGhlbWUtY2hhbmdlJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0aWYgKENvb2tpZXMuZ2V0KCd0aGVtZScpICYmICQoJy50aGVtZS1saXN0JykubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHR2YXIgdGFyZ2V0RWxtID0gJy50aGVtZS1saXN0IFtkYXRhLXRoZW1lPVwiJysgQ29va2llcy5nZXQoJ3RoZW1lJykgKydcIl0nO1xuXHRcdFx0JCh0YXJnZXRFbG0pLnRyaWdnZXIoJ2NsaWNrJyk7XG5cdFx0fVxuXHRcdGlmIChDb29raWVzLmdldCgnYXBwLXRoZW1lLWRhcmstbW9kZScpICYmICQoJy50aGVtZS1wYW5lbCBbbmFtZT1cImFwcC10aGVtZS1kYXJrLW1vZGVcIl0nKS5sZW5ndGggIT09IDApIHtcblx0XHRcdCQoJy50aGVtZS1wYW5lbCBbbmFtZT1cImFwcC10aGVtZS1kYXJrLW1vZGVcIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fVxuXHR9XG59O1xuXG5cbi8qIDE0LiBIYW5kbGUgRW5hYmxlIFRvb2x0aXAgJiBQb3BvdmVyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVFbmFibGVUb29sdGlwID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0b29sdGlwVHJpZ2dlckxpc3QgPSBbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWJzLXRvZ2dsZT1cInRvb2x0aXBcIl0nKSlcblx0dmFyIHRvb2x0aXBMaXN0ID0gdG9vbHRpcFRyaWdnZXJMaXN0Lm1hcChmdW5jdGlvbiAodG9vbHRpcFRyaWdnZXJFbCkge1xuXHRcdHJldHVybiBuZXcgYm9vdHN0cmFwLlRvb2x0aXAodG9vbHRpcFRyaWdnZXJFbClcblx0fSk7XG59O1xuXG5cbi8qIEFwcGxpY2F0aW9uIENvbnRyb2xsZXJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIEFwcCA9IGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRyZXR1cm4ge1xuXHRcdC8vbWFpbiBmdW5jdGlvblxuXHRcdGluaXQ6IGZ1bmN0aW9uICgpIHtcblx0XHRcdHRoaXMuaW5pdFNpZGViYXIoKTtcblx0XHRcdHRoaXMuaW5pdEhlYWRlcigpO1xuXHRcdFx0dGhpcy5pbml0Q29tcG9uZW50KCk7XG5cdFx0XHR0aGlzLmluaXRWYXJpYWJsZSgpO1xuXHRcdH0sXG5cdFx0aW5pdFNpZGViYXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aGFuZGxlU2lkZWJhck1pbmlmeUZsb2F0TWVudSgpO1xuXHRcdFx0aGFuZGxlU2lkZWJhck1lbnUoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJNaW5pZnkoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJNb2JpbGVUb2dnbGUoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJNb2JpbGVEaXNtaXNzKCk7XG5cdFx0fSxcblx0XHRpbml0SGVhZGVyOiBmdW5jdGlvbigpIHtcblx0XHR9LFxuXHRcdGluaXRDb21wb25lbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aGFuZGxlU2xpbVNjcm9sbCgpO1xuXHRcdFx0aGFuZGxlQ2FyZEFjdGlvbigpO1xuXHRcdFx0aGFuZGVsVG9vbHRpcFBvcG92ZXJBY3RpdmF0aW9uKCk7XG5cdFx0XHRoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbigpO1xuXHRcdFx0aGFuZGxlRHJvcGRvd25DbG9zZSgpO1xuXHRcdFx0aGFuZGxlU2Nyb2xsVG8oKTtcblx0XHRcdGhhbmRsZVRoZW1lUGFuZWxFeHBhbmQoKTtcblx0XHRcdGhhbmRsZVRoZW1lUGFnZUNvbnRyb2woKTtcblx0XHRcdGhhbmRsZUVuYWJsZVRvb2x0aXAoKTtcblx0XHR9LFxuXHRcdHNjcm9sbFRvcDogZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCdodG1sLCBib2R5LCAuY29udGVudCcpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3Bcblx0XHRcdH0sIDApO1xuXHRcdH0sXG5cdFx0Z2V0Q3NzVmFyaWFibGU6IGZ1bmN0aW9uKHZhcmlhYmxlKSB7XG5cdFx0XHRyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSh2YXJpYWJsZSkudHJpbSgpO1xuXHRcdH0sXG5cdFx0aW5pdFZhcmlhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdGFwcC5jb2xvci50aGVtZSAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYXBwLXRoZW1lJyk7XG5cdFx0XHRhcHAuZm9udC5mYW1pbHkgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJvZHktZm9udC1mYW1pbHknKTtcblx0XHRcdGFwcC5mb250LnNpemUgICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYm9keS1mb250LXNpemUnKTtcblx0XHRcdGFwcC5mb250LndlaWdodCAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYm9keS1mb250LXdlaWdodCcpO1xuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudENvbG9yID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1hcHAtY29tcG9uZW50LWNvbG9yJyk7XG5cdFx0XHRhcHAuY29sb3IuY29tcG9uZW50QmcgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWFwcC1jb21wb25lbnQtYmcnKTtcblx0XHRcdGFwcC5jb2xvci5kYXJrICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZGFyaycpO1xuXHRcdFx0YXBwLmNvbG9yLmxpZ2h0ICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1saWdodCcpO1xuXHRcdFx0YXBwLmNvbG9yLmJsdWUgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ibHVlJyk7XG5cdFx0XHRhcHAuY29sb3IuaW5kaWdvICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWluZGlnbycpO1xuXHRcdFx0YXBwLmNvbG9yLnB1cnBsZSAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1wdXJwbGUnKTtcblx0XHRcdGFwcC5jb2xvci5waW5rICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtcGluaycpO1xuXHRcdFx0YXBwLmNvbG9yLnJlZCAgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1yZWQnKTtcblx0XHRcdGFwcC5jb2xvci5vcmFuZ2UgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtb3JhbmdlJyk7XG5cdFx0XHRhcHAuY29sb3IueWVsbG93ICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXllbGxvdycpO1xuXHRcdFx0YXBwLmNvbG9yLmdyZWVuICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmVlbicpO1xuXHRcdFx0YXBwLmNvbG9yLnN1Y2Nlc3MgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1zdWNjZXNzJyk7XG5cdFx0XHRhcHAuY29sb3IudGVhbCAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXRlYWwnKTtcblx0XHRcdGFwcC5jb2xvci5jeWFuICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtY3lhbicpO1xuXHRcdFx0YXBwLmNvbG9yLndoaXRlICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy13aGl0ZScpO1xuXHRcdFx0YXBwLmNvbG9yLmdyYXkgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5Jyk7XG5cdFx0XHRhcHAuY29sb3IubGltZSAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWxpbWUnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5MTAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS0xMDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5MjAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS0yMDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5MzAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS0zMDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5NDAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS00MDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5NTAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS01MDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5NjAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS02MDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5NzAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS03MDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5ODAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS04MDAnKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5OTAwICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS05MDAnKTtcblx0XHRcdGFwcC5jb2xvci5ibGFjayAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYmxhY2snKTtcblx0XHRcdFxuXHRcdFx0YXBwLmNvbG9yLnRoZW1lUmdiICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1hcHAtdGhlbWUtcmdiJyk7XG5cdFx0XHRhcHAuZm9udC5mYW1pbHlSZ2IgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJvZHktZm9udC1mYW1pbHktcmdiJyk7XG5cdFx0XHRhcHAuZm9udC5zaXplUmdiICAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWJvZHktZm9udC1zaXplLXJnYicpO1xuXHRcdFx0YXBwLmZvbnQud2VpZ2h0UmdiICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ib2R5LWZvbnQtd2VpZ2h0LXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudENvbG9yUmdiID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1hcHAtY29tcG9uZW50LWNvbG9yLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmNvbXBvbmVudEJnUmdiICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1hcHAtY29tcG9uZW50LWJnLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmRhcmtSZ2IgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1kYXJrLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmxpZ2h0UmdiICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1saWdodC1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5ibHVlUmdiICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYmx1ZS1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5pbmRpZ29SZ2IgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtaW5kaWdvLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLnB1cnBsZVJnYiAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1wdXJwbGUtcmdiJyk7XG5cdFx0XHRhcHAuY29sb3IucGlua1JnYiAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXBpbmstcmdiJyk7XG5cdFx0XHRhcHAuY29sb3IucmVkUmdiICAgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLXJlZC1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5vcmFuZ2VSZ2IgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtb3JhbmdlLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLnllbGxvd1JnYiAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy15ZWxsb3ctcmdiJyk7XG5cdFx0XHRhcHAuY29sb3IuZ3JlZW5SZ2IgICAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyZWVuLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLnN1Y2Nlc3NSZ2IgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1zdWNjZXNzLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLnRlYWxSZ2IgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy10ZWFsLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmN5YW5SZ2IgICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1jeWFuLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLndoaXRlUmdiICAgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy13aGl0ZS1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5UmdiICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5saW1lUmdiICAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtbGltZS1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5MTAwUmdiICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS0xMDAtcmdiJyk7XG5cdFx0XHRhcHAuY29sb3IuZ3JheTIwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktMjAwLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmdyYXkzMDBSZ2IgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTMwMC1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5NDAwUmdiICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS00MDAtcmdiJyk7XG5cdFx0XHRhcHAuY29sb3IuZ3JheTUwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktNTAwLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmdyYXk2MDBSZ2IgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTYwMC1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5ncmF5NzAwUmdiICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtZ3JheS03MDAtcmdiJyk7XG5cdFx0XHRhcHAuY29sb3IuZ3JheTgwMFJnYiAgICAgICAgPSB0aGlzLmdldENzc1ZhcmlhYmxlKCctLWJzLWdyYXktODAwLXJnYicpO1xuXHRcdFx0YXBwLmNvbG9yLmdyYXk5MDBSZ2IgICAgICAgID0gdGhpcy5nZXRDc3NWYXJpYWJsZSgnLS1icy1ncmF5LTkwMC1yZ2InKTtcblx0XHRcdGFwcC5jb2xvci5ibGFja1JnYiAgICAgICAgICA9IHRoaXMuZ2V0Q3NzVmFyaWFibGUoJy0tYnMtYmxhY2stcmdiJyk7XG5cdFx0fVxuXHR9O1xufSgpO1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblx0QXBwLmluaXQoKTtcbn0pOyJdfQ==
